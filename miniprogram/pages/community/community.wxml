<view>
    <view class="no-data">
        <no-data wx:if="{{init || momentList.length === 0}}" />
    </view>
    <!-- tab顶部栏内容切换 -->
    <view class="movie-container">
        <view class="navbar">
            <block wx:for="{{navbarTitle}}" wx:key="index">
            <view 
                class="navbar-item {{navbarActiveIndex === index ? 'navbar-item-active' : ''}}" 
                data-navbar-index="{{index}}" 
                catchtap="handleNavBarTap"
            >
                <text>{{item}}</text>
            </view>
            </block>
        </view>
    </view>

    <!-- 动态列表 -->
    <block wx:for="{{momentList}}" wx:for-item="momentItem" wx:key="index">
        <view class="moment-list" wx:for="{{momentItem}}" wx:key="index">
            <view class="moment-panel">
                <LP-moment-card moment="{{item}}" data-islike="{{item.isLike}}" data-momentid="{{item._id}}" bind:tap="enterMomentDetail" />
                <LP-moment-operation moment="{{item}}" />
            </view>
        </view>
    </block>
    <!-- 发布动态的悬浮钮 -->
    <view class="publish" bind:tap="onPublish">
        <i class="iconfont icon-pen"></i>
    </view>
    <LP-bottom-line wx:if="{{isAll}}" />
</view>
<!-- 遮罩层 -->
<view wx:if="{{isPetSelected}}" class="mask" />
<!-- 选择宠物 -->
<view wx:if="{{isPetSelected}}" class="select-pet" animation="{{animation}}">
    <view class="modal-content">
        <view class="title">请先选择一只宠物</view>
        <divider />
        <scroll-view class="petWrapper" scroll-y="{{true}}">
            <block wx:for="{{petList}}" wx:key="index">
                <view class="pet {{currentIndex === index ? 'selected' : ''}}" data-index="{{index}}" bind:tap="handleClick">
                    <view class="pet-intro">
                        <avatar source="{{item.petAvatar}}" width="55" height="55" />
                        <text>{{item.petName}}</text>
                    </view>
                    <i wx:if="{{currentIndex === index}}" class="iconfont icon-finger" style="color: red" />
                </view>
            </block>
        </scroll-view>
        <divider />
        <view class="modal-operation">
            <button size="mini" bind:tap="handleCancel">取消</button>
            <divider type="vertical" height="70" />
            <button size="mini" bind:tap="handlePublish">确定</button>
        </view>
    </view>
</view>
<!-- 登录框 -->
<LP-login modalShow="{{loginShow}}" />